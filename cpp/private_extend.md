## デストラクタが仮想関数ではないクラスを継承すべきではない, というのはウソ

### スライス化問題
型Bが型Aを継承している時, A*型の変数にB*型の値を代入する事ができる.  
しかし, 一般に変数に何が代入されるかは実行時に決まるので, A*型の変数aについてa->hoge()とかくとA::hogeを意味しているのかB::hogeを意味しているのかがコンパイル時に解決できない.  
C++ではコンパイル時の型A*を参考にしてA::hogeを呼ぶようになっている.  
これがスライス化問題である.  
このことはデストラクタについてもいえて, B*型の値を代入されたA*型の変数に対してデストラクタを呼ぶと, B::~BではなくA::~Aを呼んでしまう.  
これを阻止するためにvirtual指定子を使う.  
virtualを指定されたメンバ関数は実行時の型情報を元に呼び出す関数を決定するので, 上の場合でもちゃんとB::hogeやB::~Bが呼ばれることになる.  

### 初心者にありがちな誤解
ありがちな誤解として, 上の状況でB*型の変数bに対してb->hoge()と書くとA::hogeが呼ばれると勘違いしてる人がいる.  
しかし, 上の話から分かる通りコンパイル時のbの型はB*型なので当然B::hogeが呼ばれる.

注意：この記事は書きかけです！！

